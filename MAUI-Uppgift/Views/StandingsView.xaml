<?xml version="1.0" encoding="utf-8" ?>
<ContentView xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:viewmodels="clr-namespace:MAUI_Uppgift.ViewModels"
             xmlns:views="clr-namespace:MAUI_Uppgift.Views"
             xmlns:controllers="clr-namespace:MAUI_Uppgift.Views.Controls"
             x:DataType="viewmodels:StandingViewModel"
             x:Class="MAUI_Uppgift.Views.StandingsView">
    <ScrollView>

        <Grid RowDefinitions="Auto, auto, *, auto,  *"
          ColumnDefinitions="80, *">

            <Picker Title="Select Conference"
                Margin="0 15"
                Grid.ColumnSpan="2"
                HorizontalTextAlignment="Center"
                ItemsSource="{Binding Conference}"
                SelectedItem="{Binding SelectedConference, Mode=TwoWay}"/>




            <VerticalStackLayout Margin="10 0" Grid.Row="1" Grid.ColumnSpan="2" IsVisible="{Binding HasError, Converter={StaticResource InvertedBoolConverter}} ">
                <Label Text="{Binding StandingDivision1}" 
                       HorizontalTextAlignment="Center" 
                       FontAttributes="Bold"
                       IsVisible="{Binding IsBusy, Converter={StaticResource InvertedBoolConverter}}"/>
                <CollectionView HeaderTemplate="{StaticResource StandingHeaderRow}"
                        Margin="0 15"
                        IsVisible="{Binding IsBusy, Converter={StaticResource InvertedBoolConverter}}"/>
                <CollectionView 
                        x:Name="StandingsCollection1"
                        ItemTemplate="{StaticResource StandingRowTemplate}"
                        ItemsSource="{Binding Standings1}"
                        Margin="0 15"
                        SelectionMode="Single"
                        SelectedItem="{Binding SelectedStanding1, Mode=TwoWay}"
                        SelectionChangedCommand="{Binding SelectTeamCommand}"
                        SelectionChangedCommandParameter="{Binding SelectedItem, Source={x:Reference StandingsCollection1}}"/>
            </VerticalStackLayout>
            <VerticalStackLayout Margin="10 0" Grid.Row="2" Grid.ColumnSpan="2" IsVisible="{Binding HasError, Converter={StaticResource InvertedBoolConverter}}">
                <Label Text="{Binding StandingDivision2}" 
                       HorizontalTextAlignment="Center" 
                       FontAttributes="Bold"
                       IsVisible="{Binding IsBusy, Converter={StaticResource InvertedBoolConverter}}"/>
                <CollectionView HeaderTemplate="{StaticResource StandingHeaderRow}"
                        Grid.Row="3"
                        Grid.ColumnSpan="2"
                        Margin="0 15"
                        IsVisible="{Binding IsBusy, Converter={StaticResource InvertedBoolConverter}}"/>

                <CollectionView Grid.Row="4"
                        Grid.ColumnSpan="2"
                        x:Name="StandingsCollection2"
                        Margin="0 15"
                        ItemsSource="{Binding Standings2}"
                        ItemTemplate="{StaticResource StandingRowTemplate}"
                        SelectedItem="{Binding SelectedStanding2, Mode=TwoWay}"
                        SelectionMode="Single"
                        SelectionChangedCommand="{Binding SelectTeamCommand}"
                        SelectionChangedCommandParameter="{Binding SelectedItem, Source={x:Reference StandingsCollection2}}"/>
            </VerticalStackLayout>
        </Grid>
    </ScrollView>

</ContentView>
